<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>2017年8月</title>
<link rel="shortcut icon" href="../img/icon.png" type="image/x-icon">
<link rel="stylesheet" type="text/css" href="../css/header.css">
<link rel="stylesheet" type="text/css" href="../css/weibo.css">
<script type="text/javascript" src="../js/daohang.js" charset="gbk"></script>
</head>
<body>
	<div id="header">
		<script type="text/javascript">createMenu()</script>
	</div>
	
	<div id="monthlist">
		<script type="text/javascript">
			createWeiboMonthMenu("17_08");
		</script>
	</div>
	
	<!-- 2017年8月 -->
	
	<div class="weibo">
		这两天又买了几本书，孔夫子网上：《数据结构-java版》、《java与模式》、《情撼大街》、
		《鹤鸣嘉陵》。京东上买了《天网》、《就要一场绚丽突围》、《山西老宅院》、《那时我们青春正好》。
		(8-31) 
	</div>
	
	<div class="weibo">
		研究了两小时微信小程序，大概看明白是咋回事了。
		小程序其实就是一套UI层，运行在微信这个系统里。
		从开发角度看，可以把微信看作一个游戏，小程序就像是游戏中的UI系统，每个页面是一个层。
		不由得感慨，微信用基础通讯功能取代了短信电话，干掉了运营商，用公众号和小程序则是要取代APP，干掉操作系统。。
		微信硬生生的在手机厂商、操作系统之上，构建了一个应用系统层。。真够狠的！
		幸好还有阿里巴巴，不然可能，手机只装一个微信就够了！
		(8-29) 
	</div>
	
	<div class="weibo">
		上午过来了个钉钉的部署人员，培训了一小时钉钉的使用方法。这个软件让人讨厌，功能太贪了，啥都想干，哪个体验都不好。
		下午戴着耳机，听着《得到》，写了个内蒙和生活的ppt。熟能生巧，感觉今年写文章的水平有点提高。(8-25) 
	</div>
	<div class="weibo">
		开始写简历，物色下家，毕竟这里，不是久留之地。(8-24) 
	</div>
	<div class="weibo">
		当前优惠券业务被卡商黑客盯上了，每天正不停的套取优惠券。我这里提过两次防范的方案：<br><br>
		
		1，登陆记录、订购记录都要同步给我们。<br>
		2，请求券码时，传递用户手机号、用户IP。<br>
		3，同一IP在领取一次成功后，十分钟内不允许再领取另一个手机号的券。<br>
		4，讯奇要能允许我方对订单进行核查，如果我们觉得哪个订单有问题，有权不返回券码。<br>
		5，讯奇后台支持IP黑名单的录入，设为黑名单后将不能访问权益页面。<br>
		6，所有重要操作，尤其是券码请求的逻辑，不能放在Js里。<br>
		7，服务端在发起券码请求时要做当前用户的登陆与否、订购与否的判断。<br>
		8，用户发起券码请求时，增加图形验证码的验证机制。<br><br>
--------------------------------------------------<br><br>
		考虑下用中间兑换码，不知道基地能否同意？<br>

这样所有的券码请求，我们首先把自己生成的优惠券兑换码发给用户。用户拿这个券码，到我们的某个公众号上领取对应的真实优惠券。<br><br>

这样处理对我们的好处是极其有利的。有这么几点：<br>
1，激活码是自主生成，要多少有多少。<br>
2，加大了用户兑换使用流程，减少了使用的活跃度，降低了成本。<br>
3，根据激活码的发放量，可以提前预估真实优惠券的采购规模。<br>
4，根据激活码的领取时间和ip等，可以在下发真实优惠券时，做一定的控制。<br>
5，增加了领取真实优惠券的公众号的粉丝。比如这个公众号可以是通通充。<br>
6，通过兑换码在我们平台换取真实优惠券时，我们再让他做一次语音验证，辅助以ip，手机号码等的验证。从而提高了卡商的套取门槛。<br><br>
		
很遗憾，我提出的这方案，他们不以为然。最近关于流量项目和优惠券项目，很多具体事情上，没能按照我的思路去进行。
有时候觉得很无奈，也泄气，做事情最郁闷的不是遇到的困难多么大，而是自己的队友水平不过关。尔等不足与谋！
		
		(8-22) 
	</div>
	<div class="weibo">
		京东上买了五本书，柯云路的《成功者》《孤岛》《超级圈套》，
		周国平的《成长是一件孤独的事》，成一的《茶道青红》。一共106元。
		刚看了下体育新闻，纳斯里转会去土超了，可惜了，要是来中超该多好。(8-22) 
	</div>
	<div class="weibo">
		去同和看了场电影《破局》，郭富城和王千源主演的，委实演技不错。王千源演的反派人物，很有特色。(8-21) 
	</div>
	<div class="weibo">
		下午去了文明路，逛了下国民党一大会议展览馆，中山图书馆里转了会，书摆的很乱，想找本书很难，看了会《新星》。
		7点左右骑车到越秀山体育场，观看了富力vs鲁能，结果1：1，现场看球赛不如以往那么兴奋了。(8-20) 
	</div>
	<div class="weibo">
		恒大3：0申花，在中超积分上又扩大了领先优势，在还剩下7轮的情况下，领先上港8分，夺冠几乎无悬念了。
		穆里奇梅开二度，最重要的是组织串联做的非常好，所有人都看着保利尼奥走了，觉得恒大外援实力减弱了。
		其实我的看法正好相反，穆里奇虽然防守不如保利尼奥，但是组织和突破强出很多，对球队进攻的帮助非常大。
		我觉得保利尼奥走了，给了穆里奇报名亚冠的机会，这反倒使得了恒大今年的亚冠，真的有戏了！(8-19) 
	</div>
	<div class="weibo">
		周六，上午宅在家里，下午去了学校教室，看了半天的《成功者》，柯云路的这本小说真是对我胃口。主人公塑造自己性格的心理历程，读了特别受用。(8-19) 
	</div>
	<div class="weibo">
		下班后去珠江新城图书馆借了几本书，APM线过去很方便。(8-17) 
	</div>
	<div class="weibo">
		给家里买了个美的牌冰箱。付总今天过来了，下午开了流量项目的会议，
		我写了两个流量平台的情况汇报文档，晚上一起去吃了大本营。
		我这个酒量还是有点差，逢酒必喝，逢喝必多，逢多必说。(8-16) 
	</div>
	<div class="weibo">
		保利尼奥转会巴萨了。惠生活出现了卡商盗刷，过来公司加班讨论了下。(8-13) 
	</div>
	<div class="weibo">
		秀霞来广州，跟她逛了一天。去看了《心理罪》，不好看，太惊悚了。(8-12) 
	</div>
	<div class="weibo">
		上午沟通了下。中午坐高铁回广州，火车上吃了只德州扒鸡，真好吃。
		北京几天，刀削面、炒面片、豆腐脑，可是吃的爽死了。(8-11) 
	</div>
	<div class="weibo">
		1，一开始，我们考虑的是爱施德做全部的开发。但因为我们自己会采购很多流量，这些供货接口的开发如果让爱施德来做，对我们风险太大了。<br>

而且考虑我们有其它途径的卖货，也需要有发货能力。所以供货接口对接一直是我们自己在做的。<br><br>

2，接下来，有考虑过另一个方案，即腾讯接口过来，爱施德能处理的就用自己通道处理，不能处理的再由我们供货。不过很快发现爱施德的大部分货都不太稳定，而且这样分两边供货支撑的话，太难管理了。<br><br>

3，然后就定的第三种方案，也就是全部走我们的供货通道。爱施德接到腾讯订单后，转发给我们。<br>

这几天，我们测试的充值失败退款，恰恰就是因为这个转发的流程，出现问题所导致的。直接在他们这边就定义为失败了，发起退款了，而没有把订单同步给我们。<br>

我上午跟他们沟通了解到的情况是：爱施德A平台接收到腾讯订单后，把订单同步给了爱施德B平台，由这个B平台，判断流量包商品库里有没该商品，判断订单支付金额与商品的原价*折扣是否对的上，这两个判断通过后，再将订单转发给我们来做处理。（同时，这个B平台还维护了一个金额账户，每走一笔订单，账户会计算消耗额度，这块应该是个虚拟账户，实际不会扣我们在爱施德的流量采购账户，此项待确认。）<br><br>

两个判断逻辑里的商品库和价格基准，是以我们提供的商品报价表为基准的。<br>

我们目前是同时在维护三份商品报价表，分别在腾讯卖家中心、爱施德商品库、我们自己的后台。这三份数据必须确保完全一致。<br>

爱施德传给我们的订单，里面的价格并非腾讯侧的真实付款金额，而是他们用原价*折扣计算出来的金额，这个金额有时候会与腾讯的真实付款金额不同，就会在我们平台上不能通过校验。<br><br>

所需要维护的这份商品报价表，特别复杂，数据量不小，但凡一个不小心，某个平台的某个数据有出入，就会导致相关的流量包商品充值失败。<br>

最近的失败，确定就是在校验逻辑上出错，所以直接退款的。<br><br>

——————

我现在的修改计划，是让爱施德这边，完全去除价格校验等逻辑。直接由爱施德A平台把订单转接给我们来处理，不需要经过B平台的处理。<br>

这样修改的利弊分析：<br>
1，弊端就是少了爱施德的这一个校验关口，安全管控只能靠我们自己了，这点爱施德赵总等都有提出。确实也是替我们着想。<br>

2，好处是：<br>
（1）减少了订单处理的流程，加快了整体响应时间。<br>
（2）爱施德侧不需要再维护商品价格表，大大减少了双方就此事项的沟通成本。<br>
（3）订单数据能够最原始最真实的传递到我方平台，我们将可以对订单的整个生命周期进行管理和跟踪，方便随时统计流量项目的整体运营情况。<br>
（4）这样处理，我们将比较主动，遇到任何问题或者投诉，基本上在我们自己的平台就能定位问题，并进行操作处理。<br><br>

综上所述，个人认为，做这个整改，虽然当前需要两三天时间的开发调整，但一劳永逸，会很有利于我们长期的运营，大大减少我方运营人员的沟通工作量，根本上解决掉最近出现的大量失败退款问题！<br><br>

至于安全风险问题，从逻辑上看，爱施德也是做的价格比对，我们也做好这个价格比对，并辅助以每天库存的管控，在安全保障上，其实相差不多。。(8-10) 
	</div>
	<div class="weibo">
		上午沟通。下午去了下三里屯太古里、中关村创业大街、万圣书园。十点左右跟老徐约了鸟巢见面，
		骑车找了老半天才找到，见了面聊了聊，他现在做软件培训的，发展还挺好的，挺受触动。(8-10) 
	</div>
	<div class="weibo">
		上午吃了油条豆腐脑，过去爱施德那边，沟通了几个小时。中午他们请吃的饭。
		下午4点多提早走的，出去逛了下国家图书馆。(8-9) 
	</div>
	<div class="weibo">
		下午飞北京，出差爱施德，本来是早上的航班，结果晚点了三个小时，1点多才出发，到北京是5点多了。
		机场线转地铁，到双井，发现竟然不能按地铁图上的指示，进行换乘，坑呀。
		出来后走了一段，打了个车到百子湾。住了七天酒店。骑车出去吃饭，找到一家山西面馆。
		吃了个炒面片，爽也。然后公交到大望桥，地铁到天安门西，走到天安门城楼时，碰上下雨。
		急匆匆地铁到四惠，出来发现暴雨，经过过街天桥到四惠公交枢纽，打夜班车到百子湾站，
		恰好雨停，骑摩拜回。
		(8-8) 
	</div>
	<div class="weibo">
		坐了十几个地铁站去到荔湾区，又看了一遍《血战湘江》。(8-6) 
	</div>
	<div class="weibo">
		下班去食堂四楼吃了俩韭菜盒子，我的最爱呀！(8-3) 
	</div>
	<div class="weibo">
		晚上去看了战狼2，是还可以，不过也没有很震撼嘛，这部现在是火的一塌糊涂！(8-2) 
	</div>
	<div class="weibo">
		恒大7：2富力，足协杯强势逆转！穆里奇梅开二度，王者归来！！！(8-1) 
	</div>
	
	<!-- 统计 -->
	<script type="text/javascript">
	var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
	document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Ff50f01d0ffd2e265fff98d40584f3145' type='text/javascript'%3E%3C/script%3E"));
	</script>
</body>
</html>
